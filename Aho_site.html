<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Site GitHub Pages</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        header {
            background-color: #333;
            color: white;
            padding: 10px;
        }
        footer {
            margin-top: 20px;
            font-size: 14px;
        }
        .logo-container {
            margin-top: 20px;
        }
        .logo-container img {
            width: 100px;
            height: auto;
            margin: 10px;
        }
        .video-container {
            margin-top: 20px;
        }
        iframe {
            width: 560px;
            height: 315px;
        }
        .wiki-container {
            margin-top: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        input, textarea, button {
            margin: 10px;
            width: 100%;
            padding: 10px;
        }
        .page {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
            background-color: white;
        }
    </style>
</head>
<body>
    <header>
        <h1>Bienvenue sur mon site !</h1>
    </header>
    <main>
        <p>Ceci est un site hébergé gratuitement sur GitHub Pages.</p>
        
        <!-- Widget Discord ajouté -->
        <iframe src="https://discord.com/widget?id=1371061963932569671&theme=dark" width="500" height="600" 
                allowtransparency="true" frameborder="0" 
                sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>
        
        <!-- Logos YouTube & Discord cliquables -->
        <div class="logo-container">
            <a href="https://www.youtube.com/@Ahomine-officiel" target="_blank">
                <img src="https://www.freeiconspng.com/uploads/youtube-logo-png-transparent-image-5.png" alt="YouTube">
            </a>
            <a href="https://discord.gg/NsnBk9CS5N" target="_blank">
                <img src="https://static.vecteezy.com/system/resources/previews/018/930/718/original/discord-logo-discord-icon-transparent-free-png.png" alt="Discord">
            </a>
        </div>

        <!-- Dernière vidéo YouTube en temps réel -->
        <div class="video-container">
            <iframe id="latestVideo" frameborder="0" allowfullscreen></iframe>
        </div>

        <!-- Wiki : Création et affichage de pages -->
        <div class="wiki-container">
            <h2>Créer une Page Wiki</h2>
            <input type="text" id="title" placeholder="Titre de la page">
            <textarea id="content" placeholder="Contenu de la page"></textarea>
            <button onclick="addPage()">Ajouter la page</button>
            <h2>Pages du Wiki</h2>
            <div id="pages"></div>
        </div>
    </main>
    <footer>
        <p>© 2025 - Mon Site</p>
    </footer>

    <script>
        async function getLatestVideo() {
            const apiKey = "TA_CLE_API_YOUTUBE";
            const channelId = "UCXXXXXX";
            const cacheKey = "latestYouTubeVideo";
            const cacheTime = 6 * 60 * 60 * 1000;
            const now = Date.now();
            const cachedData = JSON.parse(localStorage.getItem(cacheKey));

            if (cachedData && now - cachedData.timestamp < cacheTime) {
                document.getElementById("latestVideo").src = `https://www.youtube.com/embed/${cachedData.videoId}`;
                return;
            }

            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/search?key=${apiKey}&channelId=${channelId}&order=date&part=snippet&type=video&maxResults=1`);
                const data = await response.json();
                if (data.items.length > 0) {
                    const videoId = data.items[0].id.videoId;
                    document.getElementById("latestVideo").src = `https://www.youtube.com/embed/${videoId}`;
                    localStorage.setItem(cacheKey, JSON.stringify({ videoId, timestamp: now }));
                }
            } catch (error) {
                console.error("Erreur vidéo :", error);
            }
        }

        function addPage() {
            const title = document.getElementById("title").value;
            const content = document.getElementById("content").value;
            if (title && content) {
                let pages = JSON.parse(localStorage.getItem("wikiPages")) || [];
                pages.push({ title, content });
                localStorage.setItem("wikiPages", JSON.stringify(pages));
                loadPages();
            } else {
                alert("Remplis tous les champs !");
            }
        }

        function loadPages() {
            const pages = JSON.parse(localStorage.getItem("wikiPages")) || [];
            const container = document.getElementById("pages");
            container.innerHTML = "";
            pages.forEach(page => {
                const div = document.createElement("div");
                div.classList.add("page");
                div.innerHTML = `<h3>${page.title}</h3><p>${page.content}</p>`;
                container.appendChild(div);
            });
        }

        getLatestVideo();
        window.onload = loadPages;
    </script>
</body>
</html>
